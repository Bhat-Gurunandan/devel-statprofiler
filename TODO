- file output
  - check whether getting rid of varint encoding speed up the writer
    (we compress using Snappy anyway)
- add option to set $^P to
  - 0x200 descriptive names for anonymous subroutines
  - 0x100 descriptive names for eval ""
  - 0x10  keep information about the definition line for a subroutine
  - 0x400 save source code for all files (optionally dumping it as soon
    as possible)
- command line options for analysis script
- generated code containing #line directives
  - it might be useful to have both the original and generated code
    in the report, with some way to toggle between the two
- metadata/segmenting
  - supports writing overlapping sections
  - metadata does not belong to a section (probably not an issue, but
    it needs better handling in the aggregation phase)
  - overlapping/nested sections are not handled during aggregation
- some serious benchmarking
  - add a fast benchmark to be used during development and a slow more
    realistic one for release
- find a solution to correctly report exclusive/inclusive time for XSUBs
  with callbacks (might not be possible)
- decide what to do for multiple distinct evals mapping to the same
  logical file (with overlapping and non-overlapping line ranges)
  (t/382_evil_source_mapping.t cases in evil-source-mapping branch)
- add a separate "op" type for xsubs
- always grab eval sequence number (attach it to magic when not tracing
  all evals)
- try to detect when an eval did not add any sub/sample, and drop it
  during aggregation

- detect multiple evals with the same #line directive and different source code
- closure aggregation
- recursive sub aggregation
- handle overlapping/nested sections
- make aggregation code reusable both as a script and in a web application
- file reader: Better error reporting
  - treat truncated files as a closed stream
- test case for 9d4110d016a72fabfb5cd45c4ae97468c9070f51
- test case for 8cca10b0053cf3a2e741fae7adc7f0ed3a1fea3c
- allow calling file fetchers with multiple paths (to replace git-show with
  git-cat-file)
- merge xs:<file> with real file entries, if there is a matching one
- split the Aggregator class in two (aggregation and loading of the final report)
- add an API to read traces by section, and remove the horrible hack of returning
  a fake empty trace when a section starts/ends
    - add some kind of ->watch_sections("name1", "name2") to the reader,
      with the option of returning data both inside and outside the section
    - instead of returning a single trace, the reader now returns a section,
      with included metadata; this means a sample can be potentially returned
      multiple times in different sections
    - the aggregator class needs to be tweaked but most of the logic should
      remain the same
- rework metadata API
  - per-aggregate one requires a save
  - per-report one requires a merge
  - test it
- garbage-collect metadata for old processes
  - keep track of last seen sample per process
  - keep track of the number of active childs per process
  - garbage collect all metadata for a childless process after a configurable
    inactive time
- upgrade flamegraph script to the latest version, and submit changes
  upstream

- sporadic t/032_xsubs.t failure:
  "Invalid input file: Found stray sub-frame tag without sample-start tag"
